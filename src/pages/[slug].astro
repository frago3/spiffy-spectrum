---
import { getCollection, type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import Player from "../components/player/Player.svelte";

export const getStaticPaths = async () => {
    const albums = await getCollection("albums");
    return albums.map((album) => {
        return {
            params: { slug: album.id },
            props: { album: album },
        };
    });
};

type Props = {
    album: CollectionEntry<"albums">;
};

const { album } = Astro.props;
---

<Layout title={album.data.name}>
    <Image src={album.data.cover} alt={album.id}/>
    <Player client:load tracklist={album.data.tracklist} albumName={album.data.name}/>
</Layout>

<!-- <Player client:load tracklist={album.data.tracklist}/> -->