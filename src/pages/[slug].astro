---
import { getCollection, type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import Layout from "../layouts/Layout.astro";
import Player from "../components/player/Player.svelte";

export const getStaticPaths = async () => {
    const albums = await getCollection("albums");
    return albums.map((album) => {
        return {
            params: { slug: album.id },
            props: { album: album },
        };
    });
};

type Props = {
    album: CollectionEntry<"albums">;
};

const { album } = Astro.props;
// const { id, data: { cover, name, tracklist } } = Astro.props.album;
---

<Layout title={`Pilotopardo - ${album.data.name}`}>
    <main class="pb-10 md:pt-7">
        <section class="mx-auto max-w-screen-xl px-3 md:px-8">
            <h1 class="font-bold text-3xl mb-8 hidden md:block">{album.data.name}</h1>

            <div class="flex flex-col gap-x-9 md:flex-row-reverse">
                <div class="md:w-1/2">
                    <Image
                        src={album.data.cover}
                        alt={album.id}
                        class="w-full"
                    />
                </div>
                <div class="flex flex-col md:w-1/2">
                    <h1 class="font-bold text-2xl mt-5 mb-5 md:hidden">
                        {album.data.name}
                    </h1>
                    <Player tracklist={album.data.tracklist} albumName={album.data.name} client:load/>
                </div>
            </div>
        </section>
    </main>
</Layout>